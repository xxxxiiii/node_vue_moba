function GetQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=window.location.search.substring(1).match(t);return null!=i?unescape(i[2]):null}function resizeFont(){var e=document.documentElement,t=e.clientWidth;t&&(e.style.fontSize=t/750*100+"px")}function initScreen(){function e(){if(180==window.orientation||0==window.orientation)var e=setInterval(function(){var t=document.documentElement;t.clientWidth<t.clientHeight&&(clearInterval(e),$(".mask").hide(),resizeFont())},100);90!=window.orientation&&-90!=window.orientation||$(".mask").show()}e(),window.addEventListener("onorientationchange"in window?"orientationchange":"resize",e,!1);var t=document.getElementById("mask");t.addEventListener("touchstart",function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},!1),t.addEventListener("touchmove",function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},!1)}function resourceTiming(){return performance.getEntriesByType("resource").length}function KeywordSearch(e){this.container=e.container||"",this.page=1,this.keyword="",""!=this.container&&this.init()}function CenterSlide(e,t){this.container=e,this.variable=t||!1,this.slide,this.init()}function ArticleSlide(e,t){this.container=e,this.variable=t||!1,this.slide,this.init()}function StrategySlide(e,t){this.order="sIdxTime",this.Page=1,this.PageSize=4,this.Type="iKeyword",this.TypeId=0,this.variable=t||!0,this.container=e,this.slide,this.index=0,this.navLength=$(this.container).find(".slide-nav li").length,this.pttName=$(this.container).data("pttname"),this.init()}function HeroStrategy(){this.dataHero={}||[],this.hotList=[],this.heroShowList=[],this.herolist={}||[],this.herolistIds={}||[],this.dataHero={}||[],this.Type="iType",this.Page=1,this.PageSize=2,this.order="sIdxTime",this.TypeId,this.heroId,this.heroName,this.currIndex=0,this.init()}function getMoreNews(){Page+=1,Page>pageTotal&&console.log("没有更多了哦！~")}function curtype(e){1==e?($("#article-nav li").removeClass("currentL"),$("#article-nav li").eq(0).addClass("currentL")):2==e?($("#article-nav li").removeClass("currentL"),$("#article-nav li").eq(1).addClass("currentL")):3==e?($("#article-nav li").removeClass("currentL"),$("#article-nav li").eq(2).addClass("currentL")):4==e?($("#article-nav li").removeClass("currentL"),$("#article-nav li").eq(3).addClass("currentL")):5==e&&($("#article-nav li").removeClass("currentL"),$("#article-nav li").eq(4).addClass("currentL"))}function newpicclick(){Page1=1,$("#article-nav li").removeClass("currentL"),$("#article-nav li").eq(0).addClass("currentL"),$("#index_str_list").text(""),window.strategySlide=new ArticleSlide("#tab05")}function initPageScroll(){$(".strategy-wrap .section").addScroll({activeClass:"active",scrollFunc:{tab02:function(){console.log("initPageScroll tab02");new StrategySlide("#tab02")},tab03:function(){console.log("initPageScroll tab03");new StrategySlide("#tab03")},tab04:function(){console.log("initPageScroll tab04");new StrategySlide("#tab04")},tab05:newpicclick}})}function reloadPubdate(e){var t=/^(\d{2,4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;if(t.test(e)){var i=e.match(t),a=new Date(i[1],i[2]-1,i[3],i[4],i[5],i[6]),r=new Date,n=(r.getTime()-a.getTime())/1e3,o=Math.floor(n/60),s=Math.floor(n/3600),a=Math.floor(n/86400),l=Math.floor(n/2592e3),c=Math.floor(n/31536e3);if(c>0)return c+"年以前";if(l>0)return l+"个月以前";if(a>0)return a+"天以前";if(s>0)return s+"小时以前";if(o>0)return o+"分钟以前"}return"刚刚"}!function(e){e.getScript=function(e,t){var i=document.createElement("script");i.async="async",i.src=e,t&&(i.onload=t),document.getElementsByTagName("head")[0].appendChild(i)},e.fn.scrollTo=function(t){var i={toT:0,durTime:500,delay:30,dir:"top",callback:null},a=e.extend(i,t),r=null,n=this,o=n.scrollTop(),s=n.scrollLeft(),l=0,c=Math.round(a.durTime/a.delay),d=a.dir,h="top"==d?a.toT-o:a.toT-s;return smoothScroll=function(e){l++;var t=Math.round(h/c);if(l>=c)return"top"==d?n.scrollTop(e):n.scrollLeft(e),window.clearInterval(r),void(a.callback&&"function"==typeof a.callback&&a.callback());"top"==d?n.scrollTop(o+l*t):n.scrollLeft(s+l*t)},r=window.setInterval(function(){smoothScroll(a.toT)},a.delay),n},e.extend(e.fn,{cookie:function(t,i,a){var r,n,o,s;return arguments.length>1&&"[object Object]"!==String(i)?(a=e.extend({},a),null!==i&&void 0!==i||(a.expires=-1),"number"==typeof a.expires&&(r=24*a.expires*60*60*1e3,n=a.expires=new Date,n.setTime(n.getTime()+r)),i=String(i),document.cookie=[encodeURIComponent(t),"=",a.raw?i:encodeURIComponent(i),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")):(a=i||{},s=a.raw?function(e){return e}:decodeURIComponent,(o=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?s(o[1]):null)}})}($);var G_biz=18,G_Source="web_m",encodeParam="E5CB3C064B7A772867B1B552594434FCA26621A002CCB5AF47407E70297E2D6EE7962AC5C4D05234943B0144EDFBDCC4C2A285820C8983E5DE4E22B38EF167CCCA62220D5B3FF8BF83283431B8FF17FB790EDAA0932201873DEC7556F3CFF3AD325B51D6FF5A451618921BA48FF6818B53191FA3C7ED56E51021350FDC66A01CB44BB53178F3C501",HOTURL="//pvp.ingame.qq.com/php/ingame/smoba/top_heros.php?partition=1119&roleid=90876401&area=1&physicalID=1&algorithm=v2&version=2.14.6a&timestamp=1493112232746&appid=1104466820&sig=11a92c24e8f0d1fc74e31bb8c5203a09&encode=2&msdkEncodeParam="+encodeParam+"&game=smoba&start=1&num=10&ordertype=1&filter=0&grade=-1&herotype=0&matchtype=2",VALUABLEURL="//pvp.ingame.qq.com/php/ingame/smoba/get_valuable_book.php?partition=1119&roleid=90876401&area=1&physicalID=1&algorithm=v2&version=2.14.6a&timestamp=1493112232746&appid=1104466820&sig=11a92c24e8f0d1fc74e31bb8c5203a09&encode=2&msdkEncodeParam="+encodeParam+"&game=smoba&start=1&num=20&ordertype=1&filter=0&grade=-1&herotype=0&matchtype=2&heroid=",HEROLISTURL="//pvp.qq.com/web201605/js/herolist.json",HEROIDURL="//game.gtimg.cn/images/yxzj/m/m201706/utf8/heroid.js",isPassDue=!1,itagObj={194:"1625",198:"1626",187:"835",149:"836",175:"837",171:"838",113:"839",168:"840",108:"841",114:"842",105:"843",120:"844",135:"845",144:"847",193:"1285",180:"849",178:"850",163:"851",183:"852",126:"853",140:"854",123:"855",134:"856",139:"858",129:"859",128:"860",166:"861",167:"862",117:"863",107:"864",130:"928",170:"929",179:"1629",182:"865",190:"866",157:"867",141:"868",121:"869",156:"870",142:"871",109:"872",119:"873",152:"874",115:"875",136:"876",106:"877",124:"878",127:"879",148:"880",110:"881",196:"1295",199:"1654",192:"882",177:"883",132:"884",174:"885",173:"886",112:"889",111:"890",133:"891",169:"892",189:"1199",501:"1636",176:"1754",191:"893",186:"894",184:"895",118:"896",195:"1368",131:"897",162:"898",153:"899",154:"900",150:"901",146:"902",116:"903",502:"1755",197:"1823",503:"1858",504:"1856",522:"3001",518:"3504",523:"3047",525:"4403",524:"4653"};setTimeout(function(){$.ajax({url:HEROIDURL,dataType:"script",scriptCharset:"utf-8",success:function(e){if(null!=localStorage.getItem("module_exports")){var t=localStorage.getItem("module_exports"),i=JSON.stringify(module_exports);t!=i&&(isPassDue=!0,localStorage.setItem("module_exports",i),localStorage.setItem("perosonList",JSON.stringify(perosonList)))}else localStorage.setItem("module_exports",JSON.stringify(module_exports)),localStorage.setItem("perosonList",JSON.stringify(perosonList))}})},0),$(function(){var e=0,t=(function(){var t=window.location.href;if(/index/.test(t)){if(/matchindex/.test(t))return $(".home_bottom li").eq(2).addClass("currentL"),void(e=3);$(".home_bottom li").eq(0).addClass("currentL"),e=0}else/video/.test(t)?($(".home_bottom li").eq(1).addClass("currentL"),e=1):/strategy/.test(t)&&($(".home_bottom li").eq(1).addClass("currentL"),e=2)}(),function(t){switch(t.type){case"swiperight":e--;break;case"swipeleft":e++;break;case"tap":return window.location.href=t.orginEvent.target.href,!1;default:return}if(e<0)return e=0,!1;if(e>3)return e=3,!1;var i="";switch(e){case 0:i="//pvp.qq.com/m/index.shtml";break;case 1:i="//pvp.qq.com/m/m201606/video.shtml";break;case 2:i="m201706/strategycenter.shtml";break;case 3:i="//pvp.qq.com/m/m201606/matchindex.shtml";break;default:return}window.location.href=i});if(document.getElementById("main-nav")){var i=document.getElementById("main-nav");void 0==typeof Zepto&&$.getScript("//ossweb-img.qq.com/images/js/motion/gesture.min.js",function(){new mo.Gesture(i).addGesture("swiperight swipeleft tap",t)})}!function(e){var t=document.body.scrollTop,e=e||function(){};window.addEventListener("scroll",function(){var i=document.body.scrollTop,a=i-t;if(0===a)return!1;e(a>0?"down":"up"),t=i},!1)}(function(e){document.body.scrollTop>document.body.offsetHeight&&"up"==e?$("#main-nav").addClass("fix-bottom"):$("#main-nav").removeClass("fix-bottom")}),initScreen()}),window.reportSpeed=function(e,t){var i="flag1="+e[0]+"&flag2="+e[1]+"&flag3="+e[2]+"&flag5="+e[3]+"&1="+t.t1+"&2="+t.t2+"&3="+t.t3+"&4="+t.t4+"&5="+t.t5+"&6="+t.t6+"&7="+t.t7;(new Image).src="//report.huatuo.qq.com/report.cgi?appid=20286&platform=unknown&speedparams="+encodeURIComponent(i)},window.tgaxSpeed=function(e){var t=0,i=0,a=setInterval(function(){i=resourceTiming(),i==t?(speed_all_load=new Date,speed_all_load-=50,window.reportSpeed(e),clearInterval(a)):t=i},50)},$.fn.scrollTo=function(e){var t={toT:0,durTime:200,delay:30,callback:null},i=$.extend(t,e),a=null,r=this,n=r.scrollLeft(),o=i.toT-n,s=0,l=Math.round(i.durTime/i.delay),c=function(e){s++;var t=Math.round(o/l);if(s>=l)return r.scrollLeft(e),window.clearInterval(a),void(i.callback&&"function"==typeof i.callback&&i.callback());r.scrollLeft(n+s*t)};return a=window.setInterval(function(){c(i.toT)},i.delay),r};var G_NewsDetail="newCont.shtml",G_Detail="detail.shtml",G_IsGo=!0,G_Go="detail.shtml",globalHeroList=null,globalTypeObj={},BizTypeInfo={status:"0",msg:{1:"cf",2:"sm",3:"lol",4:"age",5:"bns",6:"codol",7:"dnf",8:"speed",9:"nba2k",10:"wt",11:"stg",13:"mhzx",14:"nz",15:"jf",16:"moba",18:"pvp",19:"yl",20:"feiji",21:"mho",22:"wuxia",24:"mx",25:"hyrz",26:"xlx",27:"tgl",28:"nfsol",29:"huoying",30:"ds",31:"poe",32:"x5",34:"cfm",35:"eafifa",36:"sg",37:"pao",38:"3vs3",39:"she",40:"hbp",41:"dn",42:"qhyx",44:"qqxy",45:"tfol",47:"hdl",48:"mxd2",49:"ep",51:"zhetianji",65:"slg",66:"mv2",67:"rf",68:"bsw",69:"nextjp",70:"speedm",71:"cfw"}};KeywordSearch.prototype={init:function(){function e(e){QuerySmartBoxList(e,10,function(e){if(0==e.status){var t="";for(var a in e.msg)t+="<li><a href=\"javascript:searchAll('"+e.msg[a].sTitle+'\');" target="_blank">'+e.msg[a].sTitle+"</a></li>";$("#smartlist").html(t).show(),$("#smartlist li").hover(function(){i=!0,$(this).css("background","#eee").siblings().css("background","#fff")},function(){i=!1,$(this).css("background","#fff")}),$("#smartlist li a").click(function(){$(this).parents("ul").hide()})}else $("#smartlist").html("").hide()})}var t=this,i=!1;$("#sForm").submit(function(){$("#sKeyword").val(encodeURIComponent($("#search").val()))}),$(t.container).keyup(function(){t.keyword=$(this).val(),""!=$.trim(t.keyword)?($("#sKeyword").val(encodeURIComponent(t.keyword)),e(t.keyword)):$("#smartlist").html("").hide()}).focus(function(){t.keyword=$(this).val(),""!=$.trim(t.keyword)&&($("#sKeyword").val(encodeURIComponent(t.keyword)),e(t.keyword))}).blur(function(){i||$("#smartlist").html("").hide(),""==t.keyword&&$(".header-search label").show()}),$(".header-search label").on("click",function(){$(this).hide(),$(t.container).focus()})},pushDatas:function(e,t,i,a){for(var r="",n=e.length>t?t:e.length,o=0;o<n;o++)r+="<li>",r+=' <span class="mess_span"><a href="gonglueSearch.shtml?G_biz=18&iType="'+a+">"+typename+"</a></span>",r+='<a id="glnewsa" href="'+linkNewsInfo(e[o].sUrl,e[o].iNewsId)+'"  onclick="WMP_LOG(\''+BizTypeInfo.msg[G_biz]+"web','"+i+"','type"+a+"','a"+e[o].iNewsId+"')\">"+e[o].sTitle+"</a>",r+="<time>"+e[o].sCreated.substr(0,10)+"</time>",r+="</li>";return r},loadVideoData:function(){""!=this.search?QueryAllSearchNewsList(this.search,this.page,PageSize,order,function(e){0==e.status?(pageTotal=e.msg.totalpage,shtml+=PushDataS(e.msg.result,PageSize,"NewsAllsearch",""),$(".mess_list ul").html(shtml)):$(".mess_list ul").html(shtml)}):QuerySearchNewsList(this.page,PageSize,order,Type,TypeId,function(e){0==e.status?(pageTotal=e.msg.totalpage,shtml+=PushDataS(e.msg.result,PageSize,"newssearch"+Type,TypeId),$(".mess_list ul").html(shtml)):$(".mess_list ul").html(shtml)})}},CenterSlide.prototype={init:function(){var e=this;$(e.container).length<1||(e.slide=new mo.Slide({target:$(e.container+" .slide-item"),direction:"x",event:{init:function(){$(e.container+" .slide-nav").on("click","li",function(){var t=$(this).index();e.slide.playTo(t)}),$(".strategy_desc").css("-webkit-line-clamp","2")},change:function(){if($(e.container+" .slide-nav li").eq(e.slide.curPage).addClass("currentL").siblings().removeClass("currentL"),e.variable){var t=$(e.container+" .tab-content").eq(e.slide.curPage).height();$(e.container).height(t+34)}}}}))}},ArticleSlide.prototype={init:function(){var e=this;$(e.container).length<1||(e.slide=new mo.Slide({target:$(e.container+" .slide-item"),direction:"x",event:{init:function(){$(e.container+" .slide-nav").on("click","li",function(){var t=$(this).index();e.slide.playTo(t)}),$(".strategy_desc").css("-webkit-line-clamp","2")},change:function(){var t=e.slide.curPage;$(e.container+" .slide-nav li").eq(t).addClass("currentL").siblings().removeClass("currentL");var i=$(e.container+" .slide-item").eq(t);if(e.variable){var a=$(e.container+" .tab-content").eq(t).height();$(e.container).height(a+34)}var r=$(e.container+" .slide-nav li").eq(t).children("a").data("id");i.children("li").length<4*articlePage[t]&&aaLoadSubTypeList(r,0,articlePage[t],4),$("#article-nav").parent().css("height",7.4*(articlePage[t]-1)+"rem")}}}))}},StrategySlide.prototype={index:0,init:function(){for(var e=this,t="",i=0;i<e.navLength;i++)t+='<ul class="tab-content hero-intr-vcont c slide-item video-list-'+i+'"></ul>';$(e.container).find(".slide-content").html(t),e.initSwiper(),$(e.container+" .tab-controller-container").scroll(function(){var t=$(this).scrollLeft();0==t&&$(e.container+" .slide-nav").css("transform","translateX(-"+t+"px)")})},initSwiper:function(){var e=this;e.slide=new mo.Slide({target:$(e.container+" .tab-content"),direction:"x",event:{init:function(){$(e.container+" .tab-controller-container .slide-nav").on("click","li",function(){e.index=$(this).index(),e.slide.playTo(e.index)}),$(".strategy_desc").css("-webkit-line-clamp","2")},beforechange:function(){this.touchMove=!1,e.index=this.curPage;var t=$(e.container).find(".slide-nav li").eq(e.index);if(t.addClass("now").siblings().removeClass("now"),e.TypeId=t.attr("data-id"),""==$(e.container+" .slide-content .video-list-"+e.index).html())e.loadData();else if(e.transformNav(),e.variable){var i=$(e.container+" .tab-content").eq(e.slide.curPage).height();$(e.container+" .slide-content").height(i)}$(e.container+" .more-words").text(t.text())}}})},transformNav:function(){var e=this,t=$(e.container+" .tab-controller-container"),i=t.width(),a=Math.ceil(($(window).width()-i)/2),r=($(e.container+" .slide-nav").width(),$(e.container+" .tab-controller li")),n=r.eq(e.index),o=n.get(0).offsetLeft,s=t.scrollLeft(),l=o-s,c=l>0&&l<i,d=parseInt(n.width())+parseInt(n.css("padding-right"))+parseInt(n.css("padding-left"));c||(l<0?t.scrollTo({toT:o-a}):l>i&&t.scrollTo({toT:o-i+d}))},loadData:function(){var e=this;677==e.TypeId?e.Type="iType":"#tab04"==e.container?e.Type="iKeyword":e.Type="iTag",$.getScript(STRATEGYAPI.VIDEOLIST+"&page=1&pagesize=4&type="+e.Type+"&id="+e.TypeId,function(){var t=userObj;if(0==t.status){if($(e.container+" .slide-content .video-list-"+e.index).html(e.pushData(t.msg.result,e.PageSize,"videosearch"+e.Type,e.TypeId)),e.variable){var i=$(e.container+" .tab-content").eq(e.slide.curPage).height();$(e.container+" .slide-content").height(i)}e.transformNav()}else $(e.container+" .slide-content .video-list-"+e.index).html(t.msg);e.slide.touchMove=!0})},pushData:function(e,t,i,a){for(var r="",n=e.length>t?t:e.length,o=$(this.container).find(".tab-controller li").eq(this.slide.curPage),s=o.text(),l="最新"==s?"Newest_details":"nav"+this.slide.curPage+"_details",c=0;c<n;c++){var d=linkInfoPro(e[c].sUrl,e[c].iVideoId,BizTypeInfo.msg[G_biz]+G_Source,"statictypenew","type"+e[c].iType);r+='<li class="li li1">',r+='<p class="v_pic hero-intr-play" href="//pvp.qq.com/m/m201606/'+d+'" onclick="PTTSendClick(\''+this.pttName+"','"+l+'\',\'详情\');" target="_blank" title="'+e[c].sTitle+'">',r+='<a href="//pvp.qq.com/m/m201606/'+d+'" onclick="PTTSendClick(\''+this.pttName+"','"+l+'\',\'详情\');"><div class="hero-intr-vimg"><img src="'+e[c].sIMG.replace("http:","https:")+'" width="200" height="112" alt="'+e[c].sTitle+'"><span>点击播放</span><i class="hero-intr-tm l">'+e[c].iTime+"</i></div></a>",r+='<a href="//pvp.qq.com/m/m201606/'+d+'" class="video-name" onclick="PTTSendClick(\''+this.pttName+"','"+l+"','详情');\">"+e[c].sTitle+"</a>",r+='<div class="hero-intr-info c">',r+='<span class="v_num hot-video-spr hot-video-fre">'+e[c].iTotalPlay+"</span>"}return r}},HeroStrategy.prototype={init:function(){this.getHotest(3),this.bind()},bind:function(){var e=this;$("#herolist li").bind("click",function(){$(this).addClass("on").siblings().removeClass("on");var t=$(this).attr("data-id");e.getHeroList(t)}),$(".hero-intr-hd").on("click",".more-heros",function(t){t.stopPropagation(),$(".hero-dropdown").toggleClass("show"),$(".hero-dropdown").hasClass("show")?($(this).text("收起"),""==$("#hero-list").html()&&e.getHeroList(0)):$(this).text("展开")}),$(".hero-intr-hd").on("click","li",function(){$(this).addClass("current").siblings().removeClass("current"),e.heroId=$(this).attr("data-id");var t=$(this).attr("data-name");e.heroName=t,e.currIndex=$(this).index(),e.getSubtypeByName(t)}),$("#hero-list").on("click","li",function(){var t=$(this).attr("subtype");e.heroId=$(this).attr("data-id");var i=$(this).text();e.heroName=i,$(".hero-dropdown").toggleClass("show"),e.updateLastHero(e.heroId,i),e.refreshHeroStrategy(t)})},updateLastHero:function(e,t){var i,a=!1,r="",n="";if($(".hero-intr-hd li").each(function(e,o){var s=$(o);if(r=s.attr("data-name"),n=s.attr("data-id"),r==t)return a=!0,i=e,!1}),a){$(".hero-intr-hd li").eq(6).remove();var o='<li data-id="'+n+'" data-name="'+r+'">'+$(".hero-intr-hd li").eq(i).html()+"</li>";o+="<li><a href=\"javascript:;\" class=\"more-heros\" onclick=\"PTTSendClick('hero','hero_more','展开');\">展开</a></li>",$(".hero-intr-hd li").eq(i).remove(),$(".hero-intr-hd").append(o)}else{var o="";o+='<li data-id="'+e+'" data-name="'+t+'"><img src="//game.gtimg.cn/images/yxzj/img201606/heroimg/'+e+"/"+e+'.jpg" alt="'+t+"\" /><a href=\"javascript:;\" onclick=\"PTTSendClick('hero','hero6','英雄6');\"></a></li>",o+="<li><a href=\"javascript:;\" class=\"more-heros\" onclick=\"PTTSendClick('hero','hero_more','展开');\">展开</a></li>",$(".hero-intr-hd li").eq(6).remove(),$(".hero-intr-hd li").eq(5).remove(),$(".hero-intr-hd").append(o)}$(".hero-intr-hd li").eq(5).addClass("current").siblings().removeClass("current")},getHotest:function(e){var t=this;$.ajax({url:HOTURL,contentType:"application/json; charset=utf-8",dataType:"jsonp",success:function(i){if("SUCCESS"==i.status)var a=setInterval(function(){void 0!=typeof module_exports&&(t.initHotest(i,e),clearInterval(a))},50)},error:function(e){console.log(e)}})},initHotest:function(e,t){for(var i=this,a=e.data.herolist,r=0;r<t;r++){var n=a[r].heroid;""!=module_exports[n]&&i.hotList.push({key:n,value:module_exports[n],type:"热门"})}for(var r in a){var n=a[r].heroid,o=a[r].appearrate,s=a[r].winrate;""!=module_exports[n]&&(i.herolist[r]=module_exports[n],i.herolistIds[r]=n,$.fn.cookie(encodeURI(module_exports[n]+"app"),o,6e4,"qq.com","/"),$.fn.cookie(encodeURI(module_exports[n]+"win"),s,6e4,"qq.com","/"))}i.heroShowList=i.hotList,i.getHeroList(0),i.getLatestHeros()},getLatestHeros:function(e){var t=this,i=0,a=0,r=function(e){for(var r in e){var n=e[r].new_type,o=e[r].pay_type||"",s=e[r].ename,l=!1;$.each(t.heroShowList,function(e,t){var i=t.key;if(s==i)return l=!0,!1}),l||("1"==n&&i<1?(i++,t.heroShowList.push({key:s,value:e[r].cname,type:"最新"})):"10"==o&&a<2&&(a++,t.heroShowList.push({key:s,value:e[r].cname,type:"限免"})))}t.refreshHeroShowList()};$.ajax({url:HEROLISTURL,dataType:"json",success:function(e){globalHeroList=e,localStorage.setItem("herolist",JSON.stringify(e)),r(e)}})},refreshHeroShowList:function(){var e=this,t="",i=e.heroShowList;e.heroId=i[0].key,e.heroName=i[0].value;for(var a=0;a<i.length;a++)t+='<li data-id="'+i[a].key+'" data-name="'+i[a].value+'"><img src="//game.gtimg.cn/images/yxzj/img201606/heroimg/'+i[a].key+"/"+i[a].key+'.jpg" alt="'+i[a].value+'" /><a href="javascript:;" onclick="PTTSendClick(\'hero\',\'hero'+(a+1)+"','英雄"+(a+1)+"');\"></a><span>"+i[a].type+"</span></li>";t+="<li><a href=\"javascript:;\" class=\"more-heros\" onclick=\"PTTSendClick('hero','hero_more','展开');\">展开</a></li>",$(".hero-intr-hd").html(t);var r=setTimeout(function(){e.getSubtypeByName(e.heroName),clearTimeout(r)},100)},getHeroList:function(e){var t=this,i=function(){var i="";if(0==e){for(var a in t.herolist)for(var r in globalTypeObj){var n=globalTypeObj[r];for(var o in n)t.herolist[a]===n[o].sName&&(i+='<li data-id="'+t.herolistIds[a]+'" subType="'+n[o].iType+'">',i+="<a>",i+='<img src="//game.gtimg.cn/images/yxzj/img201606/heroimg/'+t.herolistIds[a]+"/"+t.herolistIds[a]+'.jpg" width="60px" alt="'+n[o].sName+'">'+n[o].sName,i+="</a>",i+="</li>")}return void $("#hero-list").html(i)}var n=globalTypeObj["typelist_"+e];for(var s in n)for(var l in t.dataHero)t.dataHero[l].cname===n[s].sName&&(i+='<li data-id="'+t.dataHero[l].ename+'" subType="'+n[s].iType+'">',i+="<a>",i+='<img src="//game.gtimg.cn/images/yxzj/img201606/heroimg/'+t.dataHero[l].ename+"/"+t.dataHero[l].ename+'.jpg" width="60px" alt="'+n[s].sName+'">'+n[s].sName,i+="</a>",i+="</li>");$("#hero-list").html(i)},a=function(e){t.dataHero=e,null==localStorage.getItem("typelist")||isPassDue?$.getScript(STRATEGYAPI.TYPELIST,function(e){globalTypeObj=typeObj.msg,localStorage.setItem("typelist",JSON.stringify(globalTypeObj)),i()}):(globalTypeObj=JSON.parse(localStorage.getItem("typelist")),i())};$.ajax({url:HEROLISTURL,dataType:"json",success:function(e){globalHeroList=e,localStorage.setItem("herolist",JSON.stringify(e)),a(e)}})},getSubtypeByName:function(e){var t=this,i="";t.dataHero=globalHeroList;for(var a in globalTypeObj){var r=globalTypeObj[a];if(null!=r)for(var n=0;n<r.length;n++)if(r[n].sName==e)return i=r[n].iType,void t.refreshHeroStrategy(i)}},refreshHeroStrategy:function(e){var t=this;t.Type="iSubType",t.TypeId=e;perosonList[t.TypeId];t.loadVideoData(),t.requestHeroDetail(),$("#more-hero").text('"'+t.heroName+'"')},loadVideoData:function(){var e=this;$.ajax({type:"get",async:!1,url:"//ams.qq.com/wmp/data/js/v3/WMP_PVP_WEBSITE_NEWBEE_DATA_V1.js",dataType:"jsonp",jsonp:"callbackparam",jsonpCallback:"newbee_hero_list_callback",success:function(t){var i=t.video[e.heroName];i.reverse(),i=i.slice(0,2),parseInt(i[0].iTotalPlay)<parseInt(i[1].iTotalPlay)&&i.reverse(),$("#hero-strategy-video").html(e.pushVideoData(i,e.PageSize,"newssearch"+e.Type,e.TypeId)),e.loadArticleData(t.news[e.heroName])},error:function(){console.log("fail")}})},loadArticleData:function(e){var t=this;$.ajax({type:"get",async:!1,url:"//ams.qq.com/wmp/data/js/v3/WMP_PVP_WEBSITE_DATA_18_V3.js",dataType:"jsonp",jsonp:"callbackparam",jsonpCallback:"web_hero_list_v3",success:function(e){var i=itagObj[t.heroId],a=e[i].jData;$("#hero-strategy-article").html(t.pushRecData(a,t.PageSize,"newssearch"+t.Type,perosonList[t.TypeId]))},error:function(){console.log("fail")}})},pushRecData:function(e,t,i,a){for(var r="",n=e.length>t?t:e.length,o=0;o<n;o++){var s=e[o];if(s.iVideoId){var l=linkInfoPro(s.sUrl,s.iVideoId,BizTypeInfo.msg[G_biz]+G_Source,"statictypenew","type"+s.iType);r+='<li class="li1">',r+='<a class="v_pic hero-intr-btn" href="//pvp.qq.com/m/m201606/'+l+"\" onclick=\"PTTSendClick('hero','hero"+(this.currIndex+1)+'_image\',\'图文\');" target="_blank" title="'+s.sTitle+'">',r+='<div class="hero-intr-itl">',r+='<img src="'+s.sIMG+'" alt="'+s.sTitle+'">',r+="</div>",r+='<div class="v_infor hero-intr-itr">',r+="<p>"+s.sTitle+"</p>",r+="<p>"+s.sDesc+"</p>",r+='<p class="video-time">'+reloadPubdate(s.sCreated)+"</p></div></a></li>"}else r+='<li class="li1">',r+='<a class="v_pic hero-intr-btn" href="//pvp.qq.com/m/m201606/newCont.shtml?G_Biz=18&tid='+s.iNewsId+"\" onclick=\"PTTSendClick('hero','hero"+(this.currIndex+1)+'_image\',\'图文\');" target="_blank" title="'+s.sTitle+'">',r+='<div class="hero-intr-itl">',r+='<img src="'+s.sIMG+'" alt="'+s.sTitle+'">',r+="</div>",r+='<div class="v_infor hero-intr-itr">',r+="<p>"+s.sTitle+"</p>",r+="<p>"+s.sDesc+"</p>",r+='<p class="video-time">'+reloadPubdate(s.sCreated)+"</p></div></a></li>"}return r},pushVideoData:function(e,t,i,a){for(var r="",n=e.length>t?t:e.length,o=0;o<n;o++){var s=linkInfoPro(e[o].sUrl,e[o].iVideoId,BizTypeInfo.msg[G_biz]+G_Source,"statictypenew","type"+e[o].iType);r+='<li class="li1">',r+='<a class="v_pic hero-intr-play" href="//pvp.qq.com/m/m201606/'+s+"\" onclick=\"PTTSendClick('hero','hero"+(this.currIndex+1)+'_video\',\'视频\');" target="_blank" title="'+e[o].sTitle+'">',r+='<div class="hero-intr-vimg">',r+='<img src="'+e[o].sIMG.replace("http:","https:")+'" alt="'+e[o].sTitle+'">',r+='<span>点击播放</span><i class="hero-intr-tm l">'+e[o].iTime+"</i></div>",r+='<p class="video-name">'+e[o].sTitle+"</p>",r+='<div class="v_infor hero-intr-info c">',r+='<span class=" hot-video-spr hot-video-fre v_num">'+e[o].iTotalPlay+"</span>",r+='<span class="v_time">'+reloadPubdate(e[o].sCreated)+"</span></div></a></li>"}return r},pushArticleData:function(e,t,i,a){for(var r="",n=e.length>t?t:e.length,o=0;o<n;o++)r+='<li class="li1">',r+='<a class="v_pic hero-intr-btn" href="//pvp.qq.com/m/m201606/newCont.shtml?G_Biz=18&tid='+e[o].iNewsId+"\" onclick=\"PTTSendClick('hero','hero"+(this.currIndex+1)+'_image\',\'图文\');" target="_blank" title="'+e[o].sTitle+'">',r+='<div class="hero-intr-itl">',r+='<img src="'+e[o].sIMG.replace("http:","https:")+'" alt="'+e[o].sTitle+'">',r+="</div>",r+='<div class="v_infor hero-intr-itr">',r+="<p>"+e[o].sTitle+"</p>",r+="<p>"+e[o].sDesc+"</p>",r+='<p class="video-time">'+reloadPubdate(e[o].sCreated)+"</p></div></a></li>";return r},requestHeroDetail:function(){var e=this;$.ajax({url:VALUABLEURL+e.heroId,dataType:"jsonp",async:!1,success:function(t){if("SUCCESS"==t.status){var i=t.data.winrank,a=t.data.pickrank,r=e.getHeroTypeByName();return $("#hero-link").attr("href","//pvp.qq.com/web201605/herodetail/m/"+e.heroId+".html"),$("#hero-name").text(e.heroName),$("#hero-type").text(r),$("#pickrank").text(a),void $("#winrank").text(i)}}})},getHeroTypeByName:function(){var e,t,i=this;switch($.each(i.dataHero,function(t,a){if(a.cname==i.heroName)return e=a.hero_type,!1}),e){case 1:t="战士";break;case 2:t="法师";break;case 3:t="坦克";break;case 4:t="刺客";break;case 5:t="射手";break;case 6:t="辅助";break;default:return void(t="")}return t}};var i=0,strategyFirst=1,LoadArticleList=function(){1==strategyFirst&&(window.strategySlide=new ArticleSlide("#tab05")),strategyFirst++},LoadSubTypeList=function(e,t){0==t?QueryTypeList(function(t){var t=t["newlist"+e];$("#TypeInfoList_"+e).html(PushData(t,4,"videoindexType","new"+e))}):QueryTypeList(function(i){var i=i["videolist"+t];$("#TypeInfoList_"+e).html(PushData(i,4,"videoindexType",t))})},PushData=function(e,t,i,a){for(var r="",n=e.length>t?t:e.length,o=0;o<n;o++){var s=linkInfoPro(e[o].sUrl,e[o].iVideoId,BizTypeInfo.msg[G_biz]+G_Source,"statictypenew","type"+e[o].iType);r+='<li class="li li1">',r+='<a class="v_pic hero-intr-play" href="'+s+'" onclick="'+e[o].sLog+'" target="_blank" title="'+e[o].sTitle+'"><div class="hero-intr-vimg"><img src="'+e[o].sIMG.replace("http:","https:")+'" width="200" height="112" alt="'+e[o].sTitle+'"><span>点击播放</span><i class="hero-intr-tm l">'+e[o].iTime+'</i></div><div class="video_hover"></div></a>',r+='<a class="v_tlt" href="'+s+'" onclick="'+e[o].sLog+'" target="_blank" title="'+e[o].sTitle+'">'+e[o].sTitle+"</a>",r+='<div class="v_infor hero-intr-info c">',r+='<span class="v_num hot-video-spr hot-video-fre">'+e[o].iTotalPlay+"</span>",r+='<span class="v_time">'+ReloadPubdate(e[o].sCreated)+"</span></div></li>"}return r},defaultHeight=0,hotInit=!1,order="sIdxTime",articlePage=[1,1,1,1,1],PageSize1=4,Type1="iType",TypeId1=0,initScroll=function(){$(window).scroll(function(){var e=$(this).scrollTop(),t=$(document).height();e+$(this).height()+1>=t&&$("#article-nav li").each(function(e,t){if($(this).hasClass("currentL")){var i=$($("#article-nav a")[e]).attr("data-id");if(0==i){if(++articlePage[0]>4)return articlePage[0]=4,void $("#tab05 .load-link").text("点击查看更多");aaLoadSubTypeList(i,0,articlePage[0],4),$("#article-nav").parent().css("height",7.4*articlePage[0]+"rem")}else if(103==i){if(++articlePage[1]>4)return articlePage[1]=4,void $("#tab05 .load-link").text("点击查看更多");aaLoadSubTypeList(i,0,articlePage[1],4),$("#article-nav").parent().css("height",7.4*(articlePage[1]-1)+"rem")}else if(111==i){if(++articlePage[2]>4)return articlePage[2]=4,void $("#tab05 .load-link").text("点击查看更多");aaLoadSubTypeList(i,0,articlePage[2],4),$("#article-nav").parent().css("height",7.4*(articlePage[2]-1)+"rem")}else if(77==i){if(++articlePage[3]>4)return articlePage[3]=4,void $("#tab05 .load-link").text("点击查看更多");aaLoadSubTypeList(i,0,articlePage[3],4),$("#article-nav").parent().css("height",7.4*(articlePage[3]-1)+"rem")}else if(76==i){if(++articlePage[4]>4)return articlePage[4]=4,void $("#tab05 .load-link").text("点击查看更多");aaLoadSubTypeList(i,0,articlePage[4],4),$("#article-nav").parent().css("height",7.4*(articlePage[4]-1)+"rem")}}})})},aaLoadSubTypeList=function(e,t,i,a){0==e?$.getScript(STRATEGYAPI.NEWSLIST+"&page="+i+"&pagesize="+a+"&type=iType&id="+e,function(){var e=NewsObj.msg.result;i>4||$("#index_str_list").append(aaPushData(e,a,"Newest","最新详情"))}):$.getScript(STRATEGYAPI.NEWSLIST+"&page="+i+"&pagesize="+a+"&type="+Type1+"&id="+e,function(){var t=NewsObj.msg.result;if(!(i>4))if("103"==e){if(articlePage[1]>4)return;$("#index_str_list1").append(aaPushData(t,a,"hero_details","英雄详情"))}else if("111"==e){if(articlePage[2]>4)return;$("#index_str_list2").append(aaPushData(t,a,"notice_details","新手详情"))}else if("77"==e){if(articlePage[3]>4)return;$("#index_str_list3").append(aaPushData(t,a,"guanfang_details","官方详情"))}else if("76"==e){if(articlePage[4]>4)return;$("#index_str_list4").append(aaPushData(t,a,"tongren_details","同人详情"))}})},linkNewsInfo=function(e,t,i){return 0!=t?(""==e||/newsDetail/.test(e),G_NewsDetail+"?G_Biz="+G_biz+"&tid="+t):e},linkInfoPro=function(e,t,i,a,r,n){return parseInt(n)&&!/v.qq.com/.test(e)?G_Go+"?G_Biz="+G_biz+"&tid="+t+"&e_code="+i+"."+a+"."+r:0!=t?""==e||/v.qq.com/.test(e)||/egame.qq.com/.test(e)||/detail/.test(e)||!G_IsGo?G_Detail+"?G_Biz="+G_biz+"&tid="+t+"&e_code="+i+"."+a+"."+r:G_Go+"?G_Biz="+G_biz+"&tid="+t+"&e_code="+i+"."+a+"."+r:e},aaPushData=function(e,t,i,a){for(var r="",n=e.length>t?t:e.length,o=0;o<n;o++)r+="<li>",r+='<a href="//pvp.qq.com/m/m201606/'+linkNewsInfo(e[o].sUrl,e[o].iNewsId)+'" class="strategy_pic" onclick="PTTSendClick(\'image\',\''+i+"','"+a+'\');"><img src="'+e[o].sIMG.replace("http:","https:")+'" alt="'+e[o].sTitle+'"/></a>',r+='<div class="strategy_cont"><a href="//pvp.qq.com/m/m201606/'+linkNewsInfo(e[o].sUrl,e[o].iNewsId)+"\" onclick=\"PTTSendClick('image','"+i+"','"+a+"');\">",r+='<span  class="strategy_title">'+e[o].sTitle+"</span>",r+='<span class="strategy_num">'+e[o].iTotalPlay+'<span class="ico_read_num"></span></span>',r+='<span class="strategy_time">'+e[o].sCreated.substr(5,5)+"</span>",r+="</a></div>",r+="</li>";return r},searchChange=function(){var e=$("#searchInput"),t="input";"android"==navigator.userAgent.match(/android/i)&&(t="keyup"),e.on(t,function(){var e=$(this).val(),t=$(this).next();""==e?t.show():t.hide()})},STRATEGYAPI={
GETAD:"//ams.qq.com/wmp/data/js/v3/WMP_VDRECLIST_GW_18_229.js",HOTLIST:"//ams.qq.com/wmp/data/js/v3/WMP_RANKLIST_GW_18.js",TYPELIST:"//ams.qq.com/wmp/data/js/v3/WMP_TYPELIST_GW_18.js",VIDEOLIST:"//apps.game.qq.com/wmp/v3.1/?p0=18&p1=searchKeywordsList&order=sIdxTime&r0=script&r1=userObj&source=app_search",NEWSLIST:"//apps.game.qq.com/wmp/v3.1/?p0=18&p1=searchNewsKeywordsList&order=sIdxTime&r0=script&r1=NewsObj&source=app_news_search"},firstScreen={firstImg:null,init:function(){this.initAd(),this.initHotList(),initPageScroll()},initAd:function(){$.getScript(STRATEGYAPI.GETAD,function(){var e=rectargetObj_229.msg.reclist_236,t="";e.length>4&&(e=e.slice(0,4)),$.each(e,function(e,i){var a=linkInfoPro(i.sUrl,i.iVideoId,BizTypeInfo.msg[G_biz]+G_Source,"statictypenew","type"+i.iType);t+='<li class="slide-item">',t+='<a href="//pvp.qq.com/m/m201606/'+a+"\"  onclick=\"PTTSendClick('ad','btn_"+e+"','广告"+e+"');"+i.sLog+'">',t+='<img src="'+i.sIMG+'" />',t+="</a>",t+="</li>",0==e&&(this.firstImg=document.createElement("img"),this.firstImg.setAttribute("src",i.sIMG),this.firstImg.onload=function(){$("#VideoRecId_236").html(t),window.tab1=new mo.Slide({target:$("#banner-slide li"),autoPlay:!0,stay:3e3,animateTime:500,direction:"x",controller:!0,circle:!0})})})})},initHotList:function(){var e=this;$.getScript(STRATEGYAPI.HOTLIST,function(){var t=rankObj.msg,i="";$(".times_choice.slide-nav li").each(function(e,a){var r=$(a).attr("id");"dpvlist"==r?i="day_details":"wpvlist"==r?i="week_details":"mpvlist"==r&&(i="month_details");var n="";$.each(t[r],function(e,t){if(e<10){var a=linkInfoPro(t.sUrl,t.iVideoId,BizTypeInfo.msg[G_biz]+G_Source,"statictypenew","type"+t.iType);0==e?(n+='<li class="li li1 rank_i rank_'+(e+1)+'">',n+='<a href="//pvp.qq.com/m/m201606/'+a+"\" onclick=\"PTTSendClick('video','"+i+"','详情');"+t.sLog+'" target="_blank" title="">',n+='<div class="hot-video-play l"><img src="'+t.sIMG+'" alt="'+t.sTitle+'"><span>点击播放</span></div>',n+='<div class="hot-video-text r"><p class="hot-video-tit">'+(e+1)+"."+t.sTitle+"</p>",n+='<div class="hot-video-info c"><span class="hot_num hot-video-spr hot-video-fre">'+t.iTotalPlay+'</span><span class="hot-video-spr hot-video-tm">'+t.iTime+"</span></div></div></a></li>"):(n+='<li class="li li2 c rank_i rank_'+(e+1)+'">',n+='<a href="//pvp.qq.com/m/m201606/'+a+"\" onclick=\"PTTSendClick('video','"+i+"','详情');"+t.sLog+'" target="_blank" title=""><p>'+(e+1)+"."+t.sTitle+"</p>",n+='<span class="hot_num hot-video-fre hot-video-spr">'+t.iTotalPlay+"</span></a></li>")}}),$(".top-video-"+r).html(n),$(".hot-container").removeClass("empty")}),e.initHotSlide()})},initHotSlide:function(){var e=$(".hot_rank_list"),t=$(".hot-container");defaultHeight=e.height(),window.hotSlide=new CenterSlide("#tab01"),$(".times_choice li").click(function(){if(t.removeClass("open"),!$(this).hasClass("currentL")){$(this).addClass("currentL").siblings().removeClass("currentL");$(this).index();hotInit||(hotInit=!0),t.height("3.08rem"),$(".more-hotlist a").text("查看完整榜单")}}),$(".more-hotlist").on("click",function(){t.hasClass("open")?(t.removeClass("open"),t.height("3.08rem"),$(".more-hotlist a").text("查看完整榜单")):(t.addClass("open"),t.height(defaultHeight),$(".more-hotlist a").text("收起榜单"))})}};